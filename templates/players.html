<!DOCTYPE html>
<html>
<head>
    <title>Joueurs</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/nav_bar.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/cards.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/pagination.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/filter_bar.css') }}">
</head>
<body>
    {% include 'navbar.html' %}
    <div class="filter-bar">
        <form action="/" method="POST">
            <label for="playerName">Nom du joueur:</label>
            <input type="text" id="playerName" name="playerName">

            <input type="hidden" name="page" value="1">

            <label for="playerPosition">Position:</label>
            <input type="text" id="playerPosition" name="playerPosition">

            <div class="filter-item">
                <label for="playerHeightSign">Taille </label>
                <select id="playerHeightSign" name="height_sign">
                    <option value="gt">></option>
                    <option value="gte">>=</option>
                    <option value="eq">=</option>
                    <option value="lte"><=</option>
                    <option value="lt"><</option>
                </select>

                
                <input type="number" id="playerHeight" name="playerHeight" step= "0.01" placeholder="en mètre">
            </div>

            <div class="filter-item">
                <label for="playerWeightSign"> Poids </label>
                <select id="playerWeightSign" name="weight_sign">
                    <option value="gt">></option>
                    <option value="gte">>=</option>
                    <option value="eq">=</option>
                    <option value="lte"><=</option>
                    <option value="lt"><</option>
                </select>

                <input type="number" id="playerWeight" name="playerWeight" placeholder="en kg">
            </div>
            <label for="teamName">Nom de l'équipe:</label>
            <input type="text" id="teamName" name="teamName">
            <div class="sorting-options">
                <label>
                    <input type="radio" name="sortingOption" value="alphabetical" checked>
                    Tri alphabétique
                </label>
                <label>
                    <input type="radio" name="sortingOption" value="height">
                    Tri par taille
                </label>
                <label>
                    <input type="radio" name="sortingOption" value="weight">
                    Tri par poids
                </label>
            </div>

            <input type="submit" value="Filtrer">
        </form>
    </div>
</br>

    <div class="card-container" id="cardContainer">
        {% for player in players %}
        <a href="/player?player_id={{ player[0] }}" class="card-link">
            <div class="card">
                <h3>{{ player[1] }} {{ player[2] }}</h3>
            </div>
        </a>
        {% endfor %}
        
    </div>

    {% if post %}
        <div class="pagination">
            {% if current_page > 1 %}
                <form action="{{ url_for('players') }}" method="POST" class="pagination-form">
                    <input type="hidden" name="page" value="{{ current_page - 1 }}">
                    <input type="hidden" name="playerName" value="{{ parameters[0] }}">
                    <input type="hidden" name="playerPosition" value="{{ parameters[5] }}">
                    <input type="hidden" name="height_sign" value="{{ parameters[2] }}">
                    <input type="hidden" name="playerHeight" value="{{ parameters[1] }}">
                    <input type="hidden" name="weight_sign" value="{{ parameters[4] }}">
                    <input type="hidden" name="playerWeight" value="{{ parameters[3] }}">
                    <input type="hidden" name="sortingOption" value="{{ parameters[6] }}">
                    <!--<input type="hidden" name="teamName" value="{{ team_name }}"> -->
                    <input type="submit" value="Précédent">
                </form>
            {% endif %}
            <div class="page-input">
                <form action="{{ url_for('players') }}" method="POST" class="pagination-form">
                    <input type="hidden" name="page" value="{{ current_page - 1 }}">
                    <input type="hidden" name="playerName" value="{{ parameters[0] }}">
                    <input type="hidden" name="playerPosition" value="{{ parameters[5] }}">
                    <input type="hidden" name="height_sign" value="{{ parameters[2] }}">
                    <input type="hidden" name="playerHeight" value="{{ parameters[1] }}">
                    <input type="hidden" name="weight_sign" value="{{ parameters[4] }}">
                    <input type="hidden" name="playerWeight" value="{{ parameters[3] }}">
                    <input type="hidden" name="sortingOption" value="{{ parameters[6] }}">
                    <!--<input type="hidden" name="teamName" value="{{ team_name }}"> -->
                    <label for="pageNumber">Page :</label>
                    <input type="number" id="pageNumber" name="page" value="{{ current_page }}" min="1" max="{{ total_pages }}">
                    <input type="submit" value="Go">
                </form>
            </div>
            <p>sur {{ total_pages }}</p>
            {% if players|length == 100 %}
                <form action="{{ url_for('players') }}" method="POST" class="pagination-form">
                    <input type="hidden" name="page" value="{{ current_page + 1 }}">
                    <input type="hidden" name="playerName" value="{{ parameters[0] }}">
                    <input type="hidden" name="playerPosition" value="{{ parameters[5] }}">
                    <input type="hidden" name="height_sign" value="{{ parameters[2] }}">
                    <input type="hidden" name="playerHeight" value="{{ parameters[1] }}">
                    <input type="hidden" name="weight_sign" value="{{ parameters[4] }}">
                    <input type="hidden" name="playerWeight" value="{{ parameters[3] }}">
                    <input type="hidden" name="sortingOption" value="{{ parameters[6] }}">
                    <!--<input type="hidden" name="teamName" value="{{ team_name }}"> -->
        
                    <input type="submit" value="Suivant">
                </form>
            {% endif %}
        </div>
    {% else %}
        <div class="pagination">
            {% if current_page > 1 %}
            <a href="?page={{ current_page - 1 }}">Précédent</a>
            {% endif %}

            <div class="page-input">
                <form action="{{ url_for('players') }}" method="GET">
                    <label for="pageInput">Page:</label>
                    <input type="number" id="pageInput" name="page" value="{{ current_page }}" min="1" max="{{ total_pages }}">
                    <input type="submit" value="Go">
                </form>
                <p>sur {{ total_pages }}</p>
            </div>

            {% if players|length == 100 %}
            <a href="?page={{ current_page + 1 }}">Suivant</a>
            {% endif %}
        </div>
    {% endif %}
</body>
</html>